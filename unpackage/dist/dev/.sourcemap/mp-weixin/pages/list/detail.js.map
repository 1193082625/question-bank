{"version":3,"sources":["uni-app:///main.js",null,"webpack:////Users/wangyue/Desktop/echo/uni-app/question-bank/pages/list/detail.vue?7129","webpack:////Users/wangyue/Desktop/echo/uni-app/question-bank/pages/list/detail.vue?8271","webpack:////Users/wangyue/Desktop/echo/uni-app/question-bank/pages/list/detail.vue?ff3b","uni-app:///pages/list/detail.vue","webpack:////Users/wangyue/Desktop/echo/uni-app/question-bank/pages/list/detail.vue?ba48","webpack:////Users/wangyue/Desktop/echo/uni-app/question-bank/pages/list/detail.vue?1064"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","id","qIndex","title","field","formData","noData","isShowAnalysis","readMode","computed","uniStarterConfig","where","onLoad","uni","key","success","onReady","icon","onNavigationBarButtonTap","methods","$log","args","showAnalysis","goPrev","fail","console","goNext","changeMode","openPopup","closePopup","setReadQuestionsLog","readQuestionsLog","index","setFavorite","last_time","question_id","update","then","loadData","followClick"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACqC;;;AAG1F;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,+TAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,qRAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,mWAEN;AACP,KAAK;AACL;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjGA;AAAA;AAAA;AAAA;AAAm1B,CAAgB,oyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiFv2B;AACA;AAAA,eACA;EAiBAC;IACA;MACA;MACAC;MACAC;MACAC;MACA;MACA;MACAC;MACAC;QACAC;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;MACA;IACA;EACA;EACAC;IAAA;IACA;IACA;MACA;IACA;IACA;MACA;IACA;IACA;IACA;MACA;MACAC;QACAV;MACA;IACA;IACAU;MACAC;MACAC;QACA;QACA;MACA;IACA;EACA;EACAC;IACA;IACA;MAAA;MACA;IACA;MACAH;QACAI;QACAd;MACA;IACA;EACA;EACAe;IACA;MACA;IACA;EACA;EACAC;IACAC;MAAA;MAAA;QAAAC;MAAA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACAV;QACAC;QACAC;UACA;UACA;UACA;UACA;YACA;YACA;YACA;YACA;UACA;YACAF;cACAV;YACA;UACA;QACA;QACAqB;UACAC;QACA;MACA;IACA;IACAC;MAAA;MACAb;QACAC;QACAC;UACA;UACA;UACA;UACA;YACA;YACA;YACA;YACA;UACA;YACAF;cACAV;YACA;UACA;QACA;QACAqB;UACAC;QACA;MACA;IACA;IACAE;MACA;MACAd;QACAC;QACAd;MACA;MACA;MACA;MACA;IACA;IACA4B;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;UACA;UACA;QACA;QACAC;QACAC;MACAD;QAAA;QACA;UACAC;QACA;MACA;MACA;QACAD;MACA;QACAA;MACA;MACAlB;IACA;IACAoB;MACA;MACA;MACA;MACA;QACAC;MACAT;QAAAU;QAAAD;MAAA;MACAH,mGACAK;QAAAF;MAAA,GACAG;QAAA;QACAZ;QACA;UACAM;YAAAI;UAAA;YACAV;YACAZ;cACAV;YACA;UACA;YACAU;cACAV;YACA;UACA;QACA;MACA;QACAsB;MACA;IACA;IACAa;MACA;MACA;QACA;QACAzB;UACAV;QACA;MACA;MACA;IACA;IACA;AACA;AACA;AACA;IACAoC;MACA1B;QACAV;QACAc;MACA;IACA;IACA;AACA;AACA;EAsFA;AACA;AAAA,2B;;;;;;;;;;;;;ACpYA;AAAA;AAAA;AAAA;AAA8tC,CAAgB,ynCAAG,EAAC,C;;;;;;;;;;;ACAlvC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/list/detail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/list/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=ed2c8c0e&scoped=true&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&id=ed2c8c0e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ed2c8c0e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/list/detail.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=template&id=ed2c8c0e&scoped=true&\"","var components\ntry {\n  components = {\n    unicloudDb: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/@dcloudio/uni-cli-shared/components/unicloud-db\" */ \"@dcloudio/uni-cli-shared/components/unicloud-db.vue\"\n      )\n    },\n    uniList: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-list/components/uni-list/uni-list\" */ \"@/uni_modules/uni-list/components/uni-list/uni-list.vue\"\n      )\n    },\n    uniListItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-list/components/uni-list-item/uni-list-item\" */ \"@/uni_modules/uni-list/components/uni-list-item/uni-list-item.vue\"\n      )\n    },\n    uniRate: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-rate/components/uni-rate/uni-rate\" */ \"@/uni_modules/uni-rate/components/uni-rate/uni-rate.vue\"\n      )\n    },\n    uniDateformat: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat\" */ \"@/uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.vue\"\n      )\n    },\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = Number(_vm.qIndex)\n  var m1 = _vm.$hasSSP(\"b863f3a6-1\")\n  var m2 = m1\n    ? !_vm.$getSSP(\"b863f3a6-1\", \"default\")[\"loading\"] &&\n      _vm.$getSSP(\"b863f3a6-1\", \"default\")[\"data\"]\n    : null\n  var m3 = m1 && m2 ? _vm.$getSSP(\"b863f3a6-1\", \"default\") : null\n  var m4 = _vm.$getSSP(\"b863f3a6-1\", \"default\")\n  var m5 = _vm.$getSSP(\"b863f3a6-1\", \"default\")\n  var m6 = _vm.$getSSP(\"b863f3a6-1\", \"default\")\n  var m7 = _vm.$getSSP(\"b863f3a6-1\", \"default\")\n  var m8 =\n    m6[\"data\"].title !== m7[\"data\"].content\n      ? _vm.$getSSP(\"b863f3a6-1\", \"default\")\n      : null\n  var m9 =\n    m1 && m2 && _vm.isShowAnalysis ? _vm.$getSSP(\"b863f3a6-1\", \"default\") : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2,\n        m3: m3,\n        m4: m4,\n        m5: m5,\n        m6: m6,\n        m7: m7,\n        m8: m8,\n        m9: m9,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"","<template>\r\n\t<!--\r\n\t 本页面模板教程：https://ext.dcloud.net.cn/plugin?id=2717\r\n\t uni-list 文档：https://ext.dcloud.net.cn/plugin?id=24\r\n\t uniCloud 文档：https://uniapp.dcloud.io/uniCloud/README\r\n\t unicloud-db 组件文档：https://uniapp.dcloud.net.cn/uniCloud/unicloud-db-component\r\n\t DB Schema 规范：https://uniapp.dcloud.net.cn/uniCloud/schema\r\n\t -->\r\n\t<view class=\"article\">\r\n\t\t<!-- #ifdef APP-PLUS -->\r\n\t\t<uni-nav-bar :statusBar=\"true\" :border=\"false\"></uni-nav-bar>\r\n\t\t<!-- #endif -->\n\t\t<view class=\"detail-top\">\n\t\t\t<text class=\"t-btn\" @click=\"goPrev\">上一题</text>\n\t\t\t<text class=\"t-title\">第{{Number(qIndex)+1}}题</text>\n\t\t\t<text class=\"t-btn\" @click=\"goNext\">下一题</text>\n\t\t</view>\r\n\t\t<view class=\"article-title\">题目：{{ title }}</view>\r\n\t\t<unicloud-db v-slot:default=\"{data, loading, error, options}\" :options=\"formData\" collection=\"question-list,uni-id-users\"\r\n\t\t\t:field=\"field\" :getone=\"true\" :where=\"where\" :manual=\"true\" ref=\"detail\"\r\n\t\t\tforeignKey=\"question-list.user_id\" @load=\"loadData\">\r\n\t\t\t<template v-if=\"!loading && data\">\r\n\t\t\t\t<uni-list :border=\"false\">\r\n\t\t\t\t\t<uni-list-item thumbSize=\"lg\" :thumb=\"data.image\">\r\n\t\t\t\t\t\t<!-- 通过body插槽定义作者信息内容 -->\n\t\t\t\t\t\t<template v-slot:body>\n\t\t\t\t\t\t\t<view class=\"header-content\">\n\t\t\t\t\t\t\t\t<view class=\"flex-row\">\n\t\t\t\t\t\t\t\t\t<view class=\"difficulty\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"d-title\">难度：</text>\n\t\t\t\t\t\t\t\t\t\t<uni-rate v-model=\"data.difficulty\" touchable=\"false\" :size=\"18\" :readonly=\"true\" :is-fill=\"false\"/>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"uni-note\">更新于\n\t\t\t\t\t\t\t\t\t\t<uni-dateformat :date=\"data.last_modify_date\" format=\"yyyy-MM-dd hh:mm\"\n\t\t\t\t\t\t\t\t\t\t\t:threshold=\"[60000, 2592000000]\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view v-if=\"data.title !== data.content\" class=\"question-content\">\n\t\t\t\t\t\t\t\t\t<text>{{data.content}}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</uni-list-item>\r\n\t\t\t\t</uni-list>\r\n\t\t\t\t<view class=\"article-content\" v-if=\"isShowAnalysis\">\n\t\t\t\t\t<text class=\"analysis-title\">答案及解析：</text>\n\t\t\t\t\t<rich-text :nodes=\"data.answer_analysis\"></rich-text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"d-footer\">\n\t\t\t\t\t<view class=\"down-menu\">\n\t\t\t\t\t\t<view class=\"m-title\" @click=\"openPopup\" >\n\t\t\t\t\t\t\t<uni-icons class=\"icon\" type=\"up\" size=\"14\" color=\"#007aff\"></uni-icons>\n\t\t\t\t\t\t\t<text>更多</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<uni-popup ref=\"popup\" background-color=\"#fff\">\n\t\t\t\t\t\t\t<view class=\"popup-list\">\n\t\t\t\t\t\t\t\t<!-- todo 动态切换展示内容 -->\n\t\t\t\t\t\t\t\t<text @click=\"changeMode(readMode)\">切换到{{readMode === 0 ? '背题模式' : '“普通模式”'}}</text>\n\t\t\t\t\t\t\t\t<!-- <text>答案问题反馈</text> -->\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text class=\"popup-btn\" @click=\"closePopup\">取消</text>\n\t\t\t\t\t\t</uni-popup>\n\t\t\t\t\t</view>\n\t\t\t\t\t<!-- <view class=\"fav-btn\" @click=\"setFavorite\">\n\t\t\t\t\t\t<uni-icons class=\"icon\" type=\"heart\" size=\"14\" color=\"#ffffff\"></uni-icons>\n\t\t\t\t\t\t<text>收藏</text>\n\t\t\t\t\t</view> -->\n\t\t\t\t\t<text class=\"next-btn\" v-if=\"!isShowAnalysis\" @click=\"showAnalysis\">查看答案</text>\n\t\t\t\t\t<text class=\"next-btn\" v-else-if=\"isShowAnalysis\" @click=\"goNext\">继续刷题</text>\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t</unicloud-db>\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t// #ifdef APP\n\timport UniShare from '@/uni_modules/uni-share/js_sdk/uni-share.js';\r\n\timport uniNavBar from '@/uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.vue';\n\tconst uniShare = new UniShare()\n\t// #endif\r\n\tconst db = uniCloud.database();\r\n\tconst readQuestionsLog = db.collection('read-questions-log')\r\n\texport default {\n\t\t// #ifdef APP\r\n\t\tcomponents:{\r\n\t\t\t\"uni-nav-bar\":uniNavBar,\n\t\t},\n\t\tonBackPress({from}) {\n\t\t\tif(from == 'backbutton'){\n\t\t\t\tif(uniShare.isShow){\n\t\t\t\t\tthis.$nextTick(function(){\n\t\t\t\t\t\tconsole.log(uniShare);\n\t\t\t\t\t\tuniShare.hide()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\treturn uniShare.isShow;\n\t\t\t}\n\t\t},\n\t\t// #endif\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 当前显示 _id\r\n\t\t\t\tid: \"\",\n\t\t\t\tqIndex: 0,\r\n\t\t\t\ttitle: 'title',\r\n\t\t\t\t// 数据表名\r\n\t\t\t\t// 查询字段，多个字段用 , 分割\r\n\t\t\t\tfield: 'user_id.nickname,user_id._id,last_modify_date,comment_count,like_count,title,content,difficulty,answer,answer_analysis,is_choice,answer_options',\r\n\t\t\t\tformData: {\r\n\t\t\t\t\tnoData: '<p style=\"text-align:center;color:#666\">详情加载中...</p>'\r\n\t\t\t\t},\n\t\t\t\tisShowAnalysis: false,\n\t\t\t\treadMode: 0,\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tuniStarterConfig() {\r\n\t\t\t\treturn getApp().globalData.config\r\n\t\t\t},\n\t\t\twhere(){\n\t\t\t\t//拼接where条件 查询条件 ,更多详见 ：https://uniapp.dcloud.net.cn/uniCloud/unicloud-db?id=jsquery\n\t\t\t\treturn `_id ==\"${this.id}\"`\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(event) {\n\t\t\t//获取真实新闻id，通常 id 来自上一个页面\r\n\t\t\tif (event.id) {\n\t\t\t\tthis.id = event.id\n\t\t\t}\n\t\t\tif(event.qIndex) {\n\t\t\t\tthis.qIndex = event.qIndex;\n\t\t\t}\r\n\t\t\t//若上一页传递了标题过来，则设置导航栏标题\r\n\t\t\tif (event.title) {\r\n\t\t\t\tthis.title = event.title\r\n\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\ttitle: event.title\r\n\t\t\t\t})\r\n\t\t\t}\n\t\t\tuni.getStorage({\n\t\t\t\tkey: 'question-readMode',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tthis.isShowAnalysis = res.data === 1;\n\t\t\t\t\tthis.readMode = res.data;\n\t\t\t\t}\n\t\t\t})\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\t// 开始加载数据，修改 where 条件后才开始去加载 clinetDB 的数据 ，需要等组件渲染完毕后才开始执行 loadData，所以不能再 onLoad 中执行\r\n\t\t\tif (this.id) { // ID 不为空，则发起查询\n\t\t\t\tthis.$refs.detail.loadData()\n\t\t\t} else {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: this.$t('listDetail.newsErr')\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\n\t\tonNavigationBarButtonTap(event) {\n\t\t\tif (event.type == 'share') {\n\t\t\t\tthis.shareClick();\n\t\t\t}\n\t\t},\r\n\t\tmethods: {\n\t\t\t$log(...args){\n\t\t\t\tconsole.log('args',...args,this.id)\n\t\t\t},\n\t\t\tshowAnalysis() {\n\t\t\t\tthis.isShowAnalysis = true;\n\t\t\t},\n\t\t\tgoPrev() {\n\t\t\t\tuni.getStorage({\n\t\t\t\t\tkey: 'question-lists',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconst list = res.data;\n\t\t\t\t\t\tconst prevIndex = Number(this.qIndex)-1;\n\t\t\t\t\t\tconst prevItem = list[prevIndex];\n\t\t\t\t\t\tif(prevItem) {\n\t\t\t\t\t\t\tthis.qIndex = prevIndex;\n\t\t\t\t\t\t\tthis.title = prevItem.title;\n\t\t\t\t\t\t\tthis.id = prevItem.id;\n\t\t\t\t\t\t\tthis.$refs.detail.loadData();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '已经是第一条数据了！'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail() {\n\t\t\t\t\t\tconsole.log('获取缓存失败');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tgoNext() {\n\t\t\t\tuni.getStorage({\n\t\t\t\t\tkey: 'question-lists',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconst list = res.data;\n\t\t\t\t\t\tconst nextIndex = Number(this.qIndex)+1;\n\t\t\t\t\t\tconst nextItem = list[nextIndex];\n\t\t\t\t\t\tif(nextItem) {\n\t\t\t\t\t\t\tthis.qIndex = nextIndex;\n\t\t\t\t\t\t\tthis.title = nextItem.title;\n\t\t\t\t\t\t\tthis.id = nextItem.id;\n\t\t\t\t\t\t\tthis.$refs.detail.loadData()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '已经是最后一条数据了！'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail() {\n\t\t\t\t\t\tconsole.log('获取缓存失败');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tchangeMode(mode) {\n\t\t\t\tconst newMode = mode === 0 ? 1 : 0;\n\t\t\t\tuni.setStorage({\n\t\t\t\t\tkey: 'question-readMode',\n\t\t\t\t\tdata: newMode,\n\t\t\t\t})\n\t\t\t\tthis.isShowAnalysis = newMode === 1;\n\t\t\t\tthis.readMode = newMode;\n\t\t\t\tthis.$refs.popup.close();\n\t\t\t},\n\t\t\topenPopup() {\n\t\t\t\tthis.$refs.popup.open('bottom');\n\t\t\t},\n\t\t\tclosePopup() {\n\t\t\t\tthis.$refs.popup.close();\n\t\t\t},\r\n\t\t\tsetReadQuestionsLog(){\r\n\t\t\t\tlet item = {\r\n\t\t\t\t\t\"question_id\":this.id,\r\n\t\t\t\t\t\"last_time\":Date.now()\r\n\t\t\t\t},\r\n\t\t\t\treadQuestionsLog = uni.getStorageSync('readQuestionsLog')||[],\r\n\t\t\t\tindex = -1;\r\n\t\t\t\treadQuestionsLog.forEach(({question_id},i)=>{\r\n\t\t\t\t\tif(question_id == item.question_id){\r\n\t\t\t\t\t\tindex = i\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif(index === -1){\r\n\t\t\t\t\treadQuestionsLog.push(item)\r\n\t\t\t\t}else{\r\n\t\t\t\t\treadQuestionsLog.splice(index,1,item)\r\n\t\t\t\t}\r\n\t\t\t\tuni.setStorageSync('readQuestionsLog',readQuestionsLog)\r\n\t\t\t},\r\n\t\t\tsetFavorite() {\r\n\t\t\t\t// if ( uniCloud.getCurrentUserInfo().tokenExpired < Date.now() ){\r\n\t\t\t\t// \treturn console.log('未登录用户');\r\n\t\t\t\t// }\r\n\t\t\t\tlet question_id = this.id,\r\n\t\t\t\t\tlast_time = Date.now();\r\n\t\t\t\t\tconsole.log({question_id,last_time});\r\n\t\t\t\t\treadQuestionsLog.where(`\"question_id\" == \"${question_id}\" && \"user_id\"==$env.uid`)\r\n\t\t\t\t\t\t.update({last_time})\r\n\t\t\t\t\t\t.then(({result:{updated}}) => {\r\n\t\t\t\t\t\t\tconsole.log('updated',updated);\r\n\t\t\t\t\t\t\tif (!updated) {\r\n\t\t\t\t\t\t\t\treadQuestionsLog.add({question_id}).then(e=>{\r\n\t\t\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: '收藏成功'\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: '收藏失败'\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tloadData(data) {\r\n\t\t\t\t//如果上一页未传递标题过来（如搜索直达详情），则从新闻详情中读取标题\r\n\t\t\t\tif (this.title == '' && data[0].title) {\r\n\t\t\t\t\tthis.title = data[0].title\r\n\t\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\t\ttitle: data[0].title\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tthis.setReadQuestionsLog();\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * followClick\r\n\t\t\t * 点击关注\r\n\t\t\t */\r\n\t\t\tfollowClick() {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle:this.$t('listDetail.follow'),\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 分享该文章\r\n\t\t\t */\r\n\t\t\t// #ifdef APP\n\t\t\tshareClick() {\n\t\t\t\tlet {\n\t\t\t\t\t_id,\n\t\t\t\t\ttitle,\n\t\t\t\t\texcerpt,\n\t\t\t\t\tavatar\n\t\t\t\t} = this.$refs.detail.dataList\n\t\t\t\tconsole.log( JSON.stringify({\n\t\t\t\t\t_id,\n\t\t\t\t\ttitle,\n\t\t\t\t\texcerpt,\n\t\t\t\t\tavatar\n\t\t\t\t}) );\n\t\t\t\tuniShare.show({\n\t\t\t\t\tcontent: { //公共的分享类型（type）、链接（herf）、标题（title）、summary（描述）、imageUrl（缩略图）\n\t\t\t\t\t\ttype: 0,\n\t\t\t\t\t\thref: this.uniStarterConfig.h5.url + `/#/pages/list/detail?id=${_id}&title=${title}`,\n\t\t\t\t\t\ttitle: this.title,\n\t\t\t\t\t\tsummary: excerpt,\n\t\t\t\t\t\timageUrl: avatar + '?x-oss-process=image/resize,m_fill,h_100,w_100' //压缩图片解决，在ios端分享图过大导致的图片失效问题\n\t\t\t\t\t},\n\t\t\t\t\tmenus: [{\n\t\t\t\t\t\t\t\"img\": \"/static/app-plus/sharemenu/wechatfriend.png\",\n\t\t\t\t\t\t\t\"text\": this.$t('common.wechatFriends'),\n\t\t\t\t\t\t\t\"share\": {\n\t\t\t\t\t\t\t\t\"provider\": \"weixin\",\n\t\t\t\t\t\t\t\t\"scene\": \"WXSceneSession\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"img\": \"/static/app-plus/sharemenu/wechatmoments.png\",\n\t\t\t\t\t\t\t\"text\": this.$t('common.wechatBbs'),\n\t\t\t\t\t\t\t\"share\": {\n\t\t\t\t\t\t\t\t\"provider\": \"weixin\",\n\t\t\t\t\t\t\t\t\"scene\": \"WXSceneTimeline\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"img\": \"/static/app-plus/sharemenu/mp_weixin.png\",\n\t\t\t\t\t\t\t\"text\": this.$t('common.wechatApplet'),\n\t\t\t\t\t\t\t\"share\": {\n\t\t\t\t\t\t\t\tprovider: \"weixin\",\n\t\t\t\t\t\t\t\tscene: \"WXSceneSession\",\n\t\t\t\t\t\t\t\ttype: 5,\n\t\t\t\t\t\t\t\tminiProgram: {\n\t\t\t\t\t\t\t\t\tid: this.uniStarterConfig.mp.weixin.id,\n\t\t\t\t\t\t\t\t\tpath: `/pages/list/detail?id=${_id}&title=${title}`,\n\t\t\t\t\t\t\t\t\twebUrl: this.uniStarterConfig.h5.url +\n\t\t\t\t\t\t\t\t\t\t`/#/pages/list/detail?id=${_id}&title=${title}`,\n\t\t\t\t\t\t\t\t\ttype: 0\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"img\": \"/static/app-plus/sharemenu/weibo.png\",\n\t\t\t\t\t\t\t\"text\": this.$t('common.weibo'),\n\t\t\t\t\t\t\t\"share\": {\n\t\t\t\t\t\t\t\t\"provider\": \"sinaweibo\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"img\": \"/static/app-plus/sharemenu/qq.png\",\n\t\t\t\t\t\t\t\"text\": \"QQ\",\n\t\t\t\t\t\t\t\"share\": {\n\t\t\t\t\t\t\t\t\"provider\": \"qq\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"img\": \"/static/app-plus/sharemenu/copyurl.png\",\n\t\t\t\t\t\t\t\"text\": this.$t('common.copy'),\n\t\t\t\t\t\t\t\"share\": \"copyurl\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"img\": \"/static/app-plus/sharemenu/more.png\",\n\t\t\t\t\t\t\t\"text\": this.$t('common.more'),\n\t\t\t\t\t\t\t\"share\": \"shareSystem\"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tcancelText: this.$t('common.cancelShare'),\n\t\t\t\t}, e => { //callback\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t})\n\t\t\t}\n\t\t\t// #endif\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.header-content {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\n\t.detail-top{\n\t\tdisplay: flex;\n\t\theight: 100rpx;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding-left: 30rpx;\n\t\tpadding-right: 30rpx;\n\t\tborder-bottom: 1px solid #efeded;\n\t\tposition: relative;\n\t\tz-index: 100000;\n\t}\n\t.t-btn{\n\t\tcolor: #007aff;\n\t\tfont-size: 14px;\n\t}\n\t.t-title {\n\t\tfont-size: 16px;\n\t\tfont-weight: 700;\n\t}\n\t\r\n\t/* 标题 */\r\n\t.uni-title {\r\n\t\tdisplay: flex;\r\n\t\tmargin-bottom: 5px;\r\n\t\tfont-size: 14px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #3b4144;\r\n\t}\r\n\r\n\t.difficulty{\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t}\n\t.difficulty .d-title{\n\t\tfont-size: 12px;\n\t\tcolor: #333;\n\t\tmargin-right: 8rpx;\n\t}\r\n\t/* 描述 额外文本 */\r\n\t.uni-note {\r\n\t\tcolor: #999;\r\n\t\tfont-size: 12px;\r\n\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tdisplay: flex;\r\n\t\t/* #endif */\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.footer {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.footer-button {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tfont-size: 12px;\r\n\t\theight: 30px;\r\n\t\tcolor: #fff;\r\n\t\tbackground-color: #ff5a5f;\r\n\t}\n\t.popup-list{\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding-bottom: 20rpx;\n\t\tpadding-top: 10rpx;\n\t}\n\t.popup-list text{\n\t\tdisplay: block;\n\t\tline-height: 80rpx;\n\t\ttext-align: center;\n\t\tfont-weight: bold;\n\t}\n\t.popup-btn{\n\t\tdisplay: block;\n\t\ttext-align: center;\n\t\tline-height: 80rpx;\n\t\tborder-top: 5px solid #efeded;\n\t}\r\n\r\n\t.banner {\r\n\t\tposition: relative;\r\n\t\tmargin: 0 15px;\r\n\t\theight: 180px;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.banner-img {\r\n\t\tposition: absolute;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.banner-title {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tposition: absolute;\r\n\t\tpadding: 0 15px;\r\n\t\twidth: 100%;\r\n\t\tbottom: 0;\r\n\t\theight: 30px;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #fff;\r\n\t\tbackground: rgba(0, 0, 0, 0.4);\r\n\t\toverflow: hidden;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.uni-ellipsis {\r\n\t\toverflow: hidden;\r\n\t\twhite-space: nowrap;\r\n\t\ttext-overflow: ellipsis;\r\n\t}\r\n\r\n\t.article-title {\r\n\t\tpadding: 20px 15px;\r\n\t\tpadding-bottom: 0;\r\n\t}\r\n\r\n\t.article-content {\r\n\t\tpadding: 15px;\r\n\t\tfont-size: 15px;\r\n\t\toverflow: hidden;\r\n\t}\n\t.d-footer{\n\t\tposition: fixed;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tjustify-content: space-around;\n\t\tbackground-color: #fdfdfd;\n\t\tborder-top: 1px solid #efeded;\n\t}\n\t.down-menu{\n\t\tfont-size: 14px;\n\t}\n\t.m-title{\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tcolor: #007aff;\n\t\tfont-weight: bold;\n\t}\n\t.m-title .icon{\n\t\tmargin-right: 4rpx;\n\t}\n\t.fav-btn{\n\t\tbackground-color: #ff976a;\n\t\theight: 70rpx;\n\t\tline-height: 70rpx;\n\t\twidth: 220rpx;\n\t\ttext-align: center;\n\t\tcolor: #fff;\n\t\tfont-size: 14px;\n\t\tborder-radius: 40rpx;\n\t\tfont-weight: bold;\n\t}\n\t.next-btn{\n\t\tbackground-color: #007aff;\n\t\theight: 70rpx;\n\t\tline-height: 70rpx;\n\t\twidth: 220rpx;\n\t\ttext-align: center;\n\t\tcolor: #fff;\n\t\tfont-size: 14px;\n\t\tborder-radius: 40rpx;\n\t\tfont-weight: bold;\n\t}\n\t.flex-row{\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t}\n\t.question-content{\n\t\tmargin-top: 10px;\n\t}\n\t.analysis-title{\n\t\tdisplay: block;\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\tmargin-bottom: 30rpx;\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=0&id=ed2c8c0e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=0&id=ed2c8c0e&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1705799958049\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}