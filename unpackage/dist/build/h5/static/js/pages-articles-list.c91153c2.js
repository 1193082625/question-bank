(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-articles-list"],{"1a32":function(t,e,a){"use strict";a.r(e);var n=a("481d"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},2054:function(t,e,a){"use strict";a.r(e);var n=a("3f36"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},2162:function(t,e,a){var n=a("915b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("3b3909e5",n,!0,{sourceMap:!1,shadowMode:!1})},"316d":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var n={customTab:a("6e83").default,unicloudDb:a("960d").default,uniList:a("cf89").default,uniListItem:a("f637").default,uniDateformat:a("18f8").default,uniLoadMore:a("d709").default,uniFab:a("2574").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("customTab",{attrs:{tabDatas:t.tabDatas},on:{categoryChanged:function(e){arguments[0]=e=t.$handleEvent(e),t.categoryChanged.apply(void 0,arguments)}}},[a("unicloud-db",{ref:"udb",attrs:{collection:t.collectionList},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.data,i=(e.pagination,e.loading),o=e.hasMore,c=e.error;return[c?a("v-uni-view",[t._v(t._s(c.message))]):n?a("v-uni-view",[a("uni-list",t._l(n,(function(e,n){return a("uni-list-item",{key:n,attrs:{clickable:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleItemClick(e._id)}},scopedSlots:t._u([{key:"body",fn:function(){return[a("v-uni-view",{staticClass:"article-item"},[a("v-uni-text",{staticClass:"title"},[t._v(t._s(e.title))]),a("v-uni-view",{staticClass:"time-box"},[a("v-uni-text",[t._v("更新时间：")]),a("uni-dateformat",{staticClass:"last_modify_date",attrs:{date:e.last_modify_date,format:"yyyy-MM-dd"}})],1),a("v-uni-view",{staticClass:"like-box"},[e.like_count>0?a("v-uni-text",[t._v(t._s(e.like_count)+"赞同")]):t._e()],1)],1)]},proxy:!0}],null,!0)})})),1)],1):t._e(),a("uni-load-more",{attrs:{status:i?"loading":o?"more":"noMore"}})]}}])})],1),a("uni-fab",{ref:"fab",attrs:{horizontal:"right",vertical:"bottom","pop-menu":!1},on:{fabClick:function(e){arguments[0]=e=t.$handleEvent(e),t.fabClick.apply(void 0,arguments)}}})],1)},o=[]},"3f36":function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"customTab",data:function(){return{scrollTop:0,navIndex:0}},props:{tabDatas:{type:Array,default:[]},needSwiper:{type:Boolean,default:!1}},methods:{checkIndex:function(t){this.navIndex=t,this.$emit("categoryChanged",this.tabDatas[t]._id)},scroll:function(t){console.log(t),this.old.scrollTop=t.detail.scrollTop},tabChange:function(t){var e=t.detail.current;this.navIndex=e}}};e.default=n},4191:function(t,e,a){"use strict";var n=a("d72d"),i=a.n(n);i.a},"481d":function(t,e,a){"use strict";(function(t){a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("c7eb")),o=n(a("1da1")),c=t.database(),r={data:function(){return{loadMore:{contentdown:"",contentrefresh:"",contentnomore:""},tabDatas:[],currentCategory:""}},computed:{where:function(){return this.currentCategory?"category_id == '".concat(this.currentCategory,"'"):""},collectionList:function(){return[c.collection("opendb-news-articles").where(this.where).field("user_id,category_id,title,content,last_modify_date").getTemp(),c.collection("opendb-news-categories").field("name as text, _id").getTemp()]}},onPullDownRefresh:function(){this.$refs.udb.loadData({clear:!0},(function(){uni.stopPullDownRefresh()}))},onReachBottom:function(){this.$refs.udb.loadMore()},onLoad:function(){this.getCategories()},methods:{getCategories:function(){var t=this;return(0,o.default)((0,i.default)().mark((function e(){var a,n;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.collection("opendb-news-categories").field("name, _id").get();case 2:a=e.sent,n=a.result,t.tabDatas=n.data,n.data&&(t.currentCategory=n.data[0]._id);case 6:case"end":return e.stop()}}),e)})))()},categoryChanged:function(t){this.currentCategory=t},handleItemClick:function(t){uni.navigateTo({url:"./detail?id="+t})},fabClick:function(){var t=this;uni.navigateTo({url:"./add",events:{refreshData:function(){t.$refs.udb.loadData({clear:!0})}}})}}};e.default=r}).call(this,a("a9ff")["default"])},"4c1c":function(t,e,a){"use strict";var n=a("2162"),i=a.n(n);i.a},5688:function(t,e,a){"use strict";a.r(e);var n=a("316d"),i=a("1a32");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("4191");var c=a("f0c5"),r=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,"a4cbf90a",null,!1,n["a"],void 0);e["default"]=r.exports},"6e83":function(t,e,a){"use strict";a.r(e);var n=a("c863"),i=a("2054");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("4c1c");var c=a("f0c5"),r=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,"3f3051ec",null,!1,n["a"],void 0);e["default"]=r.exports},"915b":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".activite[data-v-3f3051ec]{color:#007aff}.tab-content[data-v-3f3051ec]{height:calc(100vh - %?188?%)}.scroll-view_H[data-v-3f3051ec]{white-space:nowrap;width:100%;color:#ccc}.scroll-view-item_H[data-v-3f3051ec]{display:inline-block;width:33%;height:%?50?%;line-height:%?50?%;text-align:center;padding:10px 0;font-size:%?32?%}",""]),t.exports=e},bc9e:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".content[data-v-a4cbf90a]{\n\t/* background: #008000; */height:100%}.article-item[data-v-a4cbf90a]{display:flex;flex-direction:column}.title[data-v-a4cbf90a]{display:block;font-size:14px;font-weight:700;margin-bottom:%?10?%;overflow:hidden;width:%?700?%;text-overflow:ellipsis;white-space:nowrap}.time-box uni-text[data-v-a4cbf90a],\n.last_modify_date[data-v-a4cbf90a]{font-size:12px;color:#999}.excerpt[data-v-a4cbf90a]{display:block;font-size:12px}",""]),t.exports=e},c863:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.tabDatas.length?a("v-uni-view",[a("v-uni-scroll-view",{staticClass:"scroll-view_H",attrs:{"scroll-x":"true"},on:{scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.scroll.apply(void 0,arguments)}}},t._l(t.tabDatas,(function(e,n){return a("v-uni-view",{key:e._id,staticClass:"scroll-view-item_H",class:t.navIndex==n?"activite":"",attrs:{id:e._id},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.checkIndex(n)}}},[t._v(t._s(e.name))])})),1),t.needSwiper?a("v-uni-swiper",{staticClass:"tab-content",attrs:{current:t.navIndex},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.tabChange.apply(void 0,arguments)}}},t._l(t.tabDatas,(function(e,n){return a("v-uni-swiper-item",{staticClass:"swiper_item "},[t._v(t._s(e.name))])})),1):a("v-uni-view",[t._t("default")],2)],1):t._e()},i=[]},d72d:function(t,e,a){var n=a("bc9e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("5369ab70",n,!0,{sourceMap:!1,shadowMode:!1})}}]);