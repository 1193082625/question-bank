require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/uni-id-pages/pages/userinfo/realname-verify/realname-verify"],{"158a":function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return i}));var i={uniList:function(){return t.e("uni_modules/uni-list/components/uni-list/uni-list").then(t.bind(null,"cf89"))},uniListItem:function(){return t.e("uni_modules/uni-list/components/uni-list-item/uni-list-item").then(t.bind(null,"f637"))},uniForms:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(t.bind(null,"5186"))},uniFormsItem:function(){return t.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(t.bind(null,"5cee"))},uniEasyinput:function(){return t.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(t.bind(null,"9346"))},uniIdPagesAgreements:function(){return t.e("uni_modules/uni-id-pages/components/uni-id-pages-agreements/uni-id-pages-agreements").then(t.bind(null,"2659"))}},r=function(){var e=this.$createElement;this._self._c},a=[]},4587:function(e,n,t){"use strict";t.r(n);var i=t("5960"),r=t.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(a);n["default"]=r.a},5960:function(e,n,t){"use strict";(function(e,i){var r=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=r(t("4082")),u=r(t("2eee")),o=r(t("c973")),s=(r(t("b8e3")),r(t("5fb2"))),f=t("7db8"),c=["errCode"],l=e.importObject("uni-id-co"),d={mixins:[s.default],data:function(){return{realName:"",idCard:"",certifyId:"",verifyFail:!1,verifyFailCode:0,verifyFailTitle:"",verifyFailContent:""}},computed:{userInfo:function(){return f.store.userInfo},certifyIdNext:function(){return Boolean(this.realName)&&Boolean(this.idCard)&&this.needAgreements&&this.agree},isCertify:function(){return this.userInfo.realNameAuth&&2===this.userInfo.realNameAuth.authStatus},isDev:function(){return!1}},onLoad:function(){var e=i.getStorageSync("uni-id-pages-temp-frv");e&&(this.realName=e.realName,this.idCard=e.idCard)},methods:{getCertifyId:function(){var e=this;return(0,o.default)(u.default.mark((function n(){var t,r;return u.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.certifyIdNext){n.next=2;break}return n.abrupt("return");case 2:return n.abrupt("return",i.showModal({content:"暂不支持实名认证",showCancel:!1}));case 6:if(!("string"!==typeof e.realName||e.realName.length<2)&&/^[\u4e00-\u9fa5]{1,10}(·?[\u4e00-\u9fa5]{1,10}){0,5}$/.test(e.realName)){n.next=9;break}return i.showToast({title:"姓名只能是汉字",icon:"none"}),n.abrupt("return");case 9:return i.setStorage({key:"uni-id-pages-temp-frv",data:{realName:e.realName,idCard:e.idCard}}),t=i.getFacialRecognitionMetaInfo(),n.next=13,l.getFrvCertifyId({realName:e.realName,idCard:e.idCard,metaInfo:t});case 13:r=n.sent,e.certifyId=r.certifyId,e.startFacialRecognitionVerify();case 16:case"end":return n.stop()}}),n)})))()},startFacialRecognitionVerify:function(){},getFrvAuthResult:function(){var n=this;return(0,o.default)(u.default.mark((function t(){var r,o,s;return u.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.importObject("uni-id-co",{customUI:!0}),t.prev=1,i.showLoading({title:"验证中...",mask:!1}),t.next=5,r.getFrvAuthResult({certifyId:n.certifyId});case 5:o=t.sent,o.errCode,s=(0,a.default)(o,c),n.verifyFailContent&&console.log("[frv-debug] 客户端刷脸失败，由实人认证服务查询具体原因，原因：".concat(n.verifyFailContent)),i.showModal({content:"实名认证成功",showCancel:!1,success:function(){f.mutations.setUserInfo({realNameAuth:s}),n.verifyFail=!1}}),i.removeStorage({key:"uni-id-pages-temp-frv"}),t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](1),n.verifyFail=!0,n.verifyFailTitle=t.t0.errMsg,console.error(JSON.stringify(t.t0));case 17:return t.prev=17,i.hideLoading(),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,12,17,20]])})))()},retry:function(){10013!==this.verifyFailCode?this.getCertifyId():this.verifyFail=!1}}};n.default=d}).call(this,t("a9ff")["default"],t("543d")["default"])},"6d5f":function(e,n,t){},"80aa":function(e,n,t){"use strict";t.r(n);var i=t("158a"),r=t("4587");for(var a in r)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(a);t("bdd4");var u=t("f0c5"),o=Object(u["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);n["default"]=o.exports},bdd4:function(e,n,t){"use strict";var i=t("6d5f"),r=t.n(i);r.a},ec14:function(e,n,t){"use strict";(function(e,n){var i=t("4ea4");t("6ed0"),t("a9ff");i(t("66fd"));var r=i(t("80aa"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(r.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])}},[["ec14","common/runtime","common/vendor","uni_modules/uni-id-pages/pages/common/vendor"]]]);